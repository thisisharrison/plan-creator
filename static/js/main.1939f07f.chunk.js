(this["webpackJsonpreact-plan-creator"]=this["webpackJsonpreact-plan-creator"]||[]).push([[0],{14:function(e,r,t){},15:function(e,r,t){"use strict";t.r(r);var n=t(1),c=t.n(n),a=t(6),i=t.n(a),s=(t(11),t(3)),u=t(2),o=t.n(u),l=t(4);function b(e){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(o.a.mark((function e(r){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==typeof JSON.parse(r)){e.next=15;break}if(t=JSON.parse(r),Array.isArray(t)){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Wrap object in array")));case 4:if(t.find((function(e){return e.primary}))){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("No primary plan")));case 6:if(t.every((function(e){return"number"===typeof e.price}))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Missing or incorrect price")));case 8:if(t.every((function(e){return Object.keys(e).every((function(r){return"name"===r||"price"===r||"currency"===r||"duration"===r||"boolean"===typeof e[r]}))}))){e.next=11;break}return e.abrupt("return",Promise.reject(new Error("Plan feature value must be boolean")));case 11:if(t.every((function(e){return"currency"in e&&"duration"in e}))){e.next=14;break}return e.abrupt("return",Promise.reject(new Error("Plans need currency and duration")));case 14:return e.abrupt("return",r);case 15:return e.abrupt("return",Promise.reject(new Error("Not a valid string")));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=t(0);var d=function(e){var r=e.initialInput,t=e.onSubmit,n=c.a.useState(r),a=Object(s.a)(n,2),i=a[0],u=a[1],j=c.a.useState({}),d=Object(s.a)(j,2),m=d[0],h=d[1],x=function(){var e=Object(l.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,b(i);case 4:n=e.sent,t(n),m.message&&h({}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),h(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{onSubmit:x,children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{htmlFor:"editor",children:["Input",Object(p.jsx)("br",{}),Object(p.jsx)("textarea",{id:"editor",type:"text",role:"textbox",onChange:function(e){u(e.currentTarget.value)},value:i,rows:"20",cols:"40"})]}),m.message&&Object(p.jsx)("small",{role:"alert",children:m.message})]}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),m.message&&Object(p.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){h({})},children:"Reset"})]})};function m(e){var r=e.plans,t=e.onClick,n=JSON.parse(r).sort((function(e,r){return e.price-r.price})),c=n.map((function(e){return Object(p.jsx)("th",{scope:"col",children:e.name},e.name)})),a=Object.keys(JSON.parse(r).filter((function(e){return e.primary}))[0]).map((function(e){return["name","primary","price","currency","duration"].includes(e)?null:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:e}),n.map((function(r){return Object(p.jsx)("td",{title:"".concat(r.name,"-").concat(e,"-").concat(r[e]?"true":"false"),children:r[e]?"\u2705":"\u274c"},"".concat(r.name,"-").concat(e))}))]},e)})),i=Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row"}),n.map((function(e){return Object(p.jsx)("td",{title:"".concat(e.name,"-price"),children:Object(p.jsxs)("label",{htmlFor:"".concat(e.name,"-price"),children:[Object(p.jsx)("input",{type:"radio",name:"select-plan",value:e.name,id:"".concat(e.name,"-price"),onClick:function(e){return t(e.currentTarget.value)}}),e.currency+" "+e.price," ",Object(p.jsx)("span",{className:"plan-duration",children:e.duration})]})},"".concat(e.name,"-price"))}))]});return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("table",{className:"table table-borderless",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col"}),c]})}),Object(p.jsxs)("tbody",{children:[a,i]})]})})}t(14);var h=function(){var e=c.a.useState('\n[{\n  "name": "standard",\n  "general": true,\n  "price": 0,\n  "currency": "HK$",\n  "duration": "month"\n},\n{\n  "name": "premium",\n  "primary": true,\n  "general": true,\n  "specialist": true,\n  "physiotherapy": true,\n  "price": 388,\n  "currency": "HK$",\n  "duration": "month"\n}]\n'),r=Object(s.a)(e,2),t=r[0],n=r[1],a=c.a.useState(null),i=Object(s.a)(a,2),u=i[0],o=i[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)("header",{children:Object(p.jsx)("h1",{children:"Plan Creator"})}),Object(p.jsxs)("main",{children:[Object(p.jsx)(d,{initialInput:t,onSubmit:function(e){n(e)}}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Choose a plan"}),Object(p.jsx)("br",{}),u?Object(p.jsxs)("p",{children:["You have selected the ",Object(p.jsx)("span",{className:"selected-plan",children:u})," plan!"]}):null,t?Object(p.jsx)(m,{plans:t,onClick:function(e){o(e)}}):null]})]})]})};i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(h,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1939f07f.chunk.js.map